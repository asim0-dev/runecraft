(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[309],{4768:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return s(6283)}])},6283:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var n=s(7876),a=s(4232);function r(){let[e,t]=(0,a.useState)(""),[s,r]=(0,a.useState)(0),[l,i]=(0,a.useState)(!1);async function o(n){n.preventDefault(),i(!0);try{let n=await fetch("/api/admin/adjust-coins",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({targetUserId:e,amount:s})}),a=await n.json();n.ok?(alert("✅ Successfully adjusted coins for ".concat(e)),t(""),r(0)):alert("Error: ".concat(a.error||"Unknown error"))}catch(e){alert("Network error while adjusting coins.")}finally{i(!1)}}let d=async e=>{i(!0);try{let t=await fetch("/api/admin/adjust-coins",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({targetUserId:"558ab90b-6e5c-4376-a6d5-043683ed8fe5",amount:e})}),s=await t.json();t.ok?alert("✅ Successfully adjusted coins for your account"):alert("Error: ".concat(s.error||"Unknown error"))}catch(e){alert("Network error while adjusting coins.")}finally{i(!1)}};return(0,n.jsxs)("div",{className:"p-6 bg-gray-900 text-white rounded-lg shadow-lg max-w-md mx-auto space-y-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold",children:"Admin Dashboard"}),(0,n.jsxs)("section",{className:"space-y-4",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold",children:"Quick Adjust (Your Account)"}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)("button",{onClick:()=>d(100),disabled:l,className:"flex-1 bg-green-600 hover:bg-green-500 disabled:opacity-50 p-2 rounded font-semibold",children:"+100 Coins"}),(0,n.jsx)("button",{onClick:()=>d(1e3),disabled:l,className:"flex-1 bg-green-600 hover:bg-green-500 disabled:opacity-50 p-2 rounded font-semibold",children:"+1000 Coins"}),(0,n.jsx)("button",{onClick:()=>d(-100),disabled:l,className:"flex-1 bg-red-600 hover:bg-red-500 disabled:opacity-50 p-2 rounded font-semibold",children:"-100 Coins"})]})]}),(0,n.jsx)("div",{className:"border-t border-gray-700 pt-6"}),(0,n.jsxs)("form",{onSubmit:o,className:"space-y-4",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold",children:"Manual Adjustment"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block mb-1",children:"Target User ID"}),(0,n.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),className:"w-full p-2 rounded bg-gray-800 border border-gray-700 focus:outline-none",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block mb-1",children:"Amount (can be negative)"}),(0,n.jsx)("input",{type:"number",value:s,onChange:e=>r(Number(e.target.value)),className:"w-full p-2 rounded bg-gray-800 border border-gray-700 focus:outline-none",required:!0})]}),(0,n.jsx)("button",{type:"submit",disabled:l,className:"w-full bg-blue-600 hover:bg-blue-500 disabled:opacity-50 p-2 rounded font-semibold",children:l?"Processing...":"Adjust Coins"})]})]})}var l=s(8100);let i=["558ab90b-6e5c-4376-a6d5-043683ed8fe5"];function o(e){let{children:t}=e,s=(0,l.createClientComponentClient)(),[r,o]=(0,a.useState)(null),[d,c]=(0,a.useState)(!1),[u,b]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{(async()=>{var e;let{data:{session:t}}=await s.auth.getSession(),n=null!=(e=null==t?void 0:t.user)?e:null;o(n),n?c(i.includes(n.id)):c(!1),b(!1)})();let{data:e}=s.auth.onAuthStateChange((e,t)=>{var s;let n=null!=(s=null==t?void 0:t.user)?s:null;o(n),n?c(i.includes(n.id)):c(!1)});return()=>{e.subscription.unsubscribe()}},[s]),u)?(0,n.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-900 text-white",children:(0,n.jsx)("p",{children:"Verifying authorization..."})}):d?(0,n.jsx)(n.Fragment,{children:t}):(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-900 text-white",children:[(0,n.jsx)("h1",{className:"text-4xl font-bold text-red-500",children:"403 - Forbidden"}),(0,n.jsx)("p",{className:"mt-4",children:"You do not have permission to view this page."})]})}function d(){return(0,n.jsx)(o,{children:(0,n.jsx)("div",{className:"container mx-auto p-4 md:p-8",children:(0,n.jsx)(r,{})})})}}},e=>{e.O(0,[100,636,593,792],()=>e(e.s=4768)),_N_E=e.O()}]);