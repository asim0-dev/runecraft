(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[228],{1084:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/gameplay",function(){return s(6929)}])},4696:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var n=s(7876),a=s(4232),r=s(9099),i=s(8100);function o(){return(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,n.jsx)("div",{className:"w-16 h-16 border-4 border-t-4 border-yellow-500 border-gray-700 rounded-full animate-spin"})})}function l(e){let{children:t}=e,s=(0,i.createClientComponentClient)(),l=(0,r.useRouter)(),[c,d]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{!async function(){let{data:{session:e}}=await s.auth.getSession();e?d(!1):l.push("/")}()},[l,s]),c)?(0,n.jsx)(o,{}):(0,n.jsx)(n.Fragment,{children:t})}},6929:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var n=s(7876),a=s(4232),r=s(8100);function i(){let e=(0,r.createClientComponentClient)(),[t,s]=(0,a.useState)(null),[i,o]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{!async function(){let{data:{user:t}}=await e.auth.getUser();if(t){let{data:n,error:a}=await e.from("profiles").select("username, coins").eq("id",t.id).single();a?console.error("Error fetching profile:",a):s(n)}o(!1)}()},[e]),i)?(0,n.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg shadow-md flex items-center justify-between animate-pulse",children:[(0,n.jsx)("div",{className:"h-4 bg-gray-600 rounded w-1/4"}),(0,n.jsx)("div",{className:"h-4 bg-gray-600 rounded w-1/6"})]}):t?(0,n.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg shadow-md flex items-center justify-between",children:[(0,n.jsxs)("span",{className:"text-xl font-semibold",children:["Hello, ",t.username,"!"]}),(0,n.jsxs)("span",{className:"text-xl font-bold text-yellow-400",children:["\uD83D\uDCB0 ",t.coins.toLocaleString()]})]}):null}function o(){let e=(0,r.createClientComponentClient)(),[t,s]=(0,a.useState)([]),[i,o]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{!async function(){let{data:{user:t}}=await e.auth.getUser();if(t){let{data:n,error:a}=await e.from("inventories").select("qty, items(name, emoji)").eq("user_id",t.id);a?console.error("Error fetching inventory:",a):s(n||[])}o(!1)}()},[e]),i)?(0,n.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 animate-pulse",children:Array.from({length:8}).map((e,t)=>(0,n.jsx)("div",{className:"bg-gray-800 p-4 rounded-lg shadow-md h-24"},t))}):(0,n.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:t.length>0?t.map((e,t)=>(0,n.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg shadow-md text-center",children:[e.items&&(0,n.jsx)("span",{className:"text-4xl",children:e.items.emoji}),e.items&&(0,n.jsx)("p",{className:"mt-2 text-sm text-gray-300",children:e.items.name}),(0,n.jsxs)("p",{className:"text-lg font-bold",children:["x",e.qty]})]},t)):(0,n.jsx)("p",{className:"text-center text-gray-400 col-span-full",children:"Your inventory is empty!"})})}function l(){let e=(0,r.createClientComponentClient)(),[t,s]=(0,a.useState)({}),i=async n=>{if(!t[n]){s(e=>({...e,[n]:!0})),setTimeout(()=>{s(e=>({...e,[n]:!1}))},5e3);try{var a;let t=await e.auth.getSession(),s=await fetch("/api/actions/".concat(n),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null==(a=t.data.session)?void 0:a.access_token)}}),r=await s.json();if(!s.ok)throw Error(r.error||"Failed to perform action");alert("Action successful! You received: ".concat(JSON.stringify(r.loot||r.coinsAdded)))}catch(e){alert("Error: ".concat(e.message))}}};return(0,n.jsxs)("div",{className:"flex justify-center space-x-4 mt-8",children:[(0,n.jsx)("button",{onClick:()=>i("hunt"),disabled:t.hunt,className:"px-6 py-3 rounded-lg text-white font-bold transition-transform transform ".concat(t.hunt?"bg-gray-600 cursor-not-allowed":"bg-green-600 hover:scale-105"),children:t.hunt?"Hunting (5s CD)":"Hunt"}),(0,n.jsx)("button",{onClick:()=>i("fish"),disabled:t.fish,className:"px-6 py-3 rounded-lg text-white font-bold transition-transform transform ".concat(t.fish?"bg-gray-600 cursor-not-allowed":"bg-blue-600 hover:scale-105"),children:t.fish?"Fishing (5s CD)":"Fish"}),(0,n.jsx)("button",{onClick:()=>i("beg"),disabled:t.beg,className:"px-6 py-3 rounded-lg text-white font-bold transition-transform transform ".concat(t.beg?"bg-gray-600 cursor-not-allowed":"bg-yellow-600 hover:scale-105"),children:t.beg?"Begging (5s CD)":"Beg"})]})}var c=s(4696);function d(){return(0,n.jsx)(c.A,{children:(0,n.jsx)("div",{className:"container mx-auto p-4 md:p-8",children:(0,n.jsxs)("div",{className:"space-y-8",children:[(0,n.jsx)(i,{}),(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-200",children:"Your Inventory"}),(0,n.jsx)(o,{}),(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-200",children:"Actions"}),(0,n.jsx)(l,{})]})})})}},9099:(e,t,s)=>{e.exports=s(8253)}},e=>{e.O(0,[100,636,593,792],()=>e(e.s=1084)),_N_E=e.O()}]);